{% extends "includes/layout_login.njk" %}
{% block content %}
<section class="logar">
    <form method="POST" action="/sessions/password_reset">
        <div class="form_logar">
            <div class="header">
                <div class="logo_login">
                    <img src="/images/Foodfy_login.png" alt="Login Foodfy">
                </div>
                <h3>Nova senha</h3>
            </div>
            <div class="form_control">
                {% include './reset_fields.njk' %}
                <button class="login-register" type="submit">Nova senha</button>
            </div>
        </div>
    </form>
</section>
<script>
    const Validate = {
        apply(input, func) {
            Validate.clearErrors(input)

            let results = Validate[func](input.value)
            input.value = results.value

            if (results.error) Validate.displayError(input, results.error)

        },
        displayError(input, error) {
            const div = document.createElement('div')
            div.classList.add('error')
            div.innerHTML = error
            input.parentNode.appendChild(div)
            input.focus()
        },
        clearErrors(input) {
            const errorDiv = input.parentNode.querySelector(".error")
            if (errorDiv)
                errorDiv.remove()
        },
        isEmail(value) {
            let error = null

            const mailFormat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/

            if (!value.match(mailFormat)) error = "Email inv√°lido"

            return {error, value}
        }
    }
</script>


{% endblock content %}